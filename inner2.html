<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="https://t4.oseale.com/favicon.png?v=2" type="image/png">
  <title>Inner2.html | t4.oseale.com</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background-color: #000; 
    }

    iframe {
      border: none;
      width: 100vw;
      height: 100vh;
      display: block;
    }
    #debugMenu {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 20px;
      padding: 10px;
      background: #111;
      color: #0f0;
      border: 1px solid #0f0;
      font-family: monospace;
      z-index: 10000;
    }
    
    .debug-visible #debugMenu {
      display: block;
    }
  </style>
</head>
<body>
  <iframe
  id="slideshowFrame"
  src="https://docs.google.com/presentation/d/e/2PACX-1vQwfM3Ns0fWrfCjer7gYcTTJ_d96j7WlZ0RPTY_t9I_mtR1E-05P3PVy9wnYkuPmPmXWdYOjl8LGlAC/embed?start=true&loop=true&delayms=5000&rm=minimal"
  style="width: 100vw; height: 100vh; border: none; display: block;"
  allowfullscreen
></iframe>
  

  <script>
  // Set the interval time in milliseconds (e.g., 5000ms = 5 seconds)
  const CHECK_INTERVAL = 60000;
  
  // Your Apps Script endpoint
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby8X53IgB9gmaBjnt2wbxtlNiHucPs_ZjOK3LJvrbocxAM4qdRM6dup0JCxP2fmmGgF/exec";

  let countdown = CHECK_INTERVAL / 1000;
  const countdownDisplay = document.getElementById("timeUntilNext");

    // Countdown updater
  setInterval(() => {
    if (countdown > 0) {
      countdown--;
      countdownDisplay.textContent = countdown;
    }
  }, 1000);
    
  // Function to check status and refresh if needed
  function checkStatusAndRefresh() {
    fetch(SCRIPT_URL)
      .then(response => response.text())
      .then(data => {
        const status = Number(data.trim()); // Convert "1" to 1
        console.log("Status received:", status);
  
        if (status === 1) {
          console.log("Status is 1 â€” refreshing page.");
          location.reload();
        }
      })
      .catch(error => {
        console.error("Error fetching status:", error);
      });
  }
  
  // Start the timed execution
  setInterval(checkStatusAndRefresh, CHECK_INTERVAL);
  </script>



  
  <script type="module">
    function updateCountdown() {
      const now = Date.now();
      const msRemaining = nextUpdateTime - now;
      const secondsRemaining = Math.max(0, Math.floor(msRemaining / 1000));
      document.getElementById("timeUntilNext").textContent = secondsRemaining + "s";
    }
    
    setInterval(() => {
      nextUpdateTime = Date.now() + interval;
    }, interval);
    
    setInterval(updateCountdown, 1000); // Update debug menu countdown every second

    function scheduleMidnightReload() {
      const now = new Date();
      const midnight = new Date();
    
      midnight.setHours(24, 0, 0, 0); // Set to next 0:00
    
      const timeUntilMidnight = midnight.getTime() - now.getTime();
    
      setTimeout(() => {
        location.reload();
      }, timeUntilMidnight);
    }
    
    scheduleMidnightReload();

    function displayTimeUntilMidnight() {
      const now = new Date();
      const midnight = new Date();
    
      midnight.setHours(24, 0, 0, 0); // Set to next 0:00
    
      const msLeft = midnight.getTime() - now.getTime();
    
      const hours = Math.floor(msLeft / 1000 / 60 / 60);
      const minutes = Math.floor((msLeft / 1000 / 60) % 60);
      const seconds = Math.floor((msLeft / 1000) % 60);
    
      const formatted = `${hours}h ${minutes}m ${seconds}s until midnight`;
      document.getElementById("midnightTime").textContent = formatted;
    }

// Call it once on load
    displayTimeUntilMidnight();
  </script>
  <div id="debugMenu">
  <p>Next update in: <span id="timeUntilNext">60s</span></p>
  </div>
<script>
  function toggleDebugMenu() {
    document.body.classList.toggle("debug-visible");
  }

  document.addEventListener("keydown", (e) => {
    if (e.key === "F3") {
      e.preventDefault(); // optional
      toggleDebugMenu();
    }
  });
</script>
</body>
</html>
