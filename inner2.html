<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="https://t4.oseale.com/favicon.png?v=2" type="image/png">
  <title>Inner2.html | t4.oseale.com</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background-color: #000; 
    }

    iframe {
      border: none;
      width: 100vw;
      height: 100vh;
      display: block;
    }
    #debugMenu {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 20px;
      padding: 10px;
      background: #111;
      color: #0f0;
      border: 1px solid #0f0;
      font-family: monospace;
      z-index: 10000;
    }
    
    .debug-visible #debugMenu {
      display: block;
    }
  </style>
</head>
<body>
  <iframe
  id="slideshowFrame"
  src="https://docs.google.com/presentation/d/e/2PACX-1vQwfM3Ns0fWrfCjer7gYcTTJ_d96j7WlZ0RPTY_t9I_mtR1E-05P3PVy9wnYkuPmPmXWdYOjl8LGlAC/embed?start=true&loop=true&delayms=5000&rm=minimal"
  style="width: 100vw; height: 100vh; border: none; display: block;"
  allowfullscreen
></iframe>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-remote-config.js"></script>
  
  <script>
var firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    projectId: "YOUR_PROJECT_ID",
    appId: "YOUR_APP_ID"
  };

  firebase.initializeApp(firebaseConfig);

  var remoteConfig = firebase.remoteConfig();
  remoteConfig.settings = {
    minimumFetchIntervalMillis: 60000
  };
  remoteConfig.defaultConfig = {
    refresh_version: "1"
  };

  var lastVersion = remoteConfig.defaultConfig.refresh_version;
  var interval = 60000;
  var nextUpdateTime = Date.now() + interval;

  function checkForUpdate() {
    remoteConfig.fetchAndActivate()
      .then(function (fetchedRemotely) {
        var current = remoteConfig.getValue("refresh_version").asString();
        var fetchEl = document.getElementById("fetchSource");
        var sourceText = fetchedRemotely ? "Fresh from server" : "Served from cache";
        fetchEl.textContent = sourceText;
        fetchEl.style.color = fetchedRemotely ? "#0f0" : "#888";

        if (current !== lastVersion) {
          lastVersion = current;
          location.reload();
        }

        console.log("Current version:", current);
        console.log("Last version:", lastVersion);
        console.log("Fetched from:", sourceText);
      })
      .catch(function (e) {
        console.error("Remote Config error:", e);
      });
  }

  function updateCountdown() {
    var now = Date.now();
    var msRemaining = nextUpdateTime - now;
    var secondsRemaining = Math.max(0, Math.floor(msRemaining / 1000));
    document.getElementById("timeUntilNext").textContent = secondsRemaining + "s";
  }

  setInterval(function () {
    checkForUpdate();
    nextUpdateTime = Date.now() + interval;
  }, interval);

  setInterval(updateCountdown, 1000);

  function scheduleMidnightReload() {
    var now = new Date();
    var midnight = new Date();
    midnight.setHours(24, 0, 0, 0);
    var timeUntilMidnight = midnight.getTime() - now.getTime();

    setTimeout(function () {
      location.reload();
    }, timeUntilMidnight);
  }

  scheduleMidnightReload();

  function displayTimeUntilMidnight() {
    var now = new Date();
    var midnight = new Date();
    midnight.setHours(24, 0, 0, 0);
    var msLeft = midnight.getTime() - now.getTime();

    var hours = Math.floor(msLeft / 1000 / 60 / 60);
    var minutes = Math.floor((msLeft / 1000 / 60) % 60);
    var seconds = Math.floor((msLeft / 1000) % 60);

    var formatted = hours + "h " + minutes + "m " + seconds + "s until midnight";
    document.getElementById("midnightTime").textContent = formatted;
  }

  displayTimeUntilMidnight();
  </script>
  <div id="debugMenu">
  <p>Next update in: <span id="timeUntilNext">60s</span></p>
  <p>Fetch source: <span id="fetchSource">â€”</span></p>
  <p id="midnightTime"></p>
  </div>
<script>
  function toggleDebugMenu() {
    document.body.classList.toggle("debug-visible");
  }

  document.addEventListener("keydown", (e) => {
    if (e.key === "F3") {
      e.preventDefault(); // optional
      toggleDebugMenu();
    }
  });
</script>
</body>
</html>
